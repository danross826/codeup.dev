
<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Online Store</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> <!--bootstrap(HTML)-->
    <link rel="stylesheet" type="text/css" href="CSS/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="CSS/ajax-store.css">
</head>
<body>
<div class="row">
    <div class="col-md-6 col-md-offset-3">

        <h1>My Tool Store</h1>

        <table id="products">
            <thead>
            <tr>
                <th id="title">Title</th>
                <th id="quantity">Quantity</th>
                <th id="price">Price</th>
                <th id="category">Categories</th>
            </tr>
            </thead>
            <tbody id="insertProducts"></tbody>

        </table>
        <button id="refresh">Refresh</button>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>
    (function() {
        "use strict";
        // TODO: Create an ajax GET request for /data/inventory.json

//
//        function addInventory(data) {
//            data.forEach(function (tool) {
//                var $content='';
//                $content=$('#insertProducts').append('<tr>'+'<td>'+data.title+'</td>'+'<tr>'+'<td>'+data.quantity+'</td>'+'<tr>'+'<td>'+data.price+'</td>'+'<tr>'+'<td>'+data.categories+'</td>'+'</tr>')
//
//            })
//        }


        function addInventory (data) {
            data.forEach(function (tool) {
                var content = '';
                content += '<tr>';
                content += '<td>'+tool.title+'</td>';
                content += '<td>'+tool.quantity+'</td>';
                content += '<td>'+tool.price+'</td>';
                content += '<td>'+tool.categories+'</td>'+'</tr>';
                console.log(content);
                $('#insertProducts').append(content);
            });
        }


        var url='/data/inventory.json';
        $("#refresh").click(function (event) {
            $.ajax(url).done(function (data) {
                alert("Everything went great!");
                $('#insertProducts').html("");
                addInventory(data)
            }).fail(function () {
                alert("There was an error.")
            }).always(function () {
                alert('We\'re done')
            });
        });

        // TODO: Take the data from inventory.json and append it to the products table
        //       HINT: Your data should come back as a JSON object; use console.log() to inspect
        //             its contents and fields
        //       HINT: You will want to target #insertProducts for your new HTML elements




    })();
</script>

</body>
</html>
